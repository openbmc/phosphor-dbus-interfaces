{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "763a8beb_499f8c3a",
        "filename": "yaml/xyz/openbmc_project/Software/Manager.interface.yaml",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2025-03-26T23:20:05Z",
      "side": 1,
      "message": "BMCWeb cannot create any intersection of targets as it cannot process the image, it shall simply map the Redfish URIs to object path and send that as target objectsPaths.",
      "revId": "e4ef4d635ebe94e3f77a2d323f21a2ba61b0ac45",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a7ba493_80ac8a03",
        "filename": "yaml/xyz/openbmc_project/Software/Manager.interface.yaml",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2025-04-02T04:33:41Z",
      "side": 1,
      "message": "\u003eit shall simply map the Redfish URIs to object path and send that as target objectsPaths.\n\nCorrect.\n\nThe description is mentioning that in the case of a multi part image and user passed Targets, the entities that will be updated will be an intersection of (images in the package) âˆ© (FW in the Targets property)",
      "parentUuid": "763a8beb_499f8c3a",
      "revId": "e4ef4d635ebe94e3f77a2d323f21a2ba61b0ac45",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "15d5a10f_20ae9c69",
        "filename": "yaml/xyz/openbmc_project/Software/Manager.interface.yaml",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2025-04-02T23:19:21Z",
      "side": 1,
      "message": "Ok, then how would you inform the user via Redfish Task on what happened to the Targets which were not updated (from Target URI list)? Ideally, you need to inform some status such as ActivationStatus.Invalid to mark the Activation failed for those targets, so they can be updated in the Task messages.",
      "parentUuid": "8a7ba493_80ac8a03",
      "revId": "e4ef4d635ebe94e3f77a2d323f21a2ba61b0ac45",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae616cad_8b5aecf9",
        "filename": "yaml/xyz/openbmc_project/Software/Manager.interface.yaml",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2025-04-11T02:34:44Z",
      "side": 1,
      "message": "It will be reported on the RF task, if the Targets are not updated. On the question of how Redfish task will be updated, I have added my suggestion there.",
      "parentUuid": "15d5a10f_20ae9c69",
      "revId": "e4ef4d635ebe94e3f77a2d323f21a2ba61b0ac45",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2b6c9e71_81d90665",
        "filename": "yaml/xyz/openbmc_project/Software/Manager.interface.yaml",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2025-03-26T23:20:05Z",
      "side": 1,
      "message": "How are you planning to plumb this interface for multiple targets back to the BMCWeb? Currently, update interface returns single object path and BMCWeb watches for progress and activation interface on that.",
      "revId": "e4ef4d635ebe94e3f77a2d323f21a2ba61b0ac45",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b1618e9c_dec8f137",
        "filename": "yaml/xyz/openbmc_project/Software/Manager.interface.yaml",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2025-04-02T04:33:41Z",
      "side": 1,
      "message": "code-update-manager will also implement the Software.Update method and return a single object path which will be used by bmcweb to track progress and completion.",
      "parentUuid": "2b6c9e71_81d90665",
      "revId": "e4ef4d635ebe94e3f77a2d323f21a2ba61b0ac45",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4497c292_fab16506",
        "filename": "yaml/xyz/openbmc_project/Software/Manager.interface.yaml",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2025-04-02T23:19:21Z",
      "side": 1,
      "message": "\u003e code-update-manager will also implement the Software.Update method and return a single object path which will be used by bmcweb to track progress and completion.\n\nYou cannot use a single object path to track the progress and status for all the components in the package. How would you report in task messages on what failed and whats the progress status for each of them?",
      "parentUuid": "b1618e9c_dec8f137",
      "revId": "e4ef4d635ebe94e3f77a2d323f21a2ba61b0ac45",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3738013f_f1aed7bc",
        "filename": "yaml/xyz/openbmc_project/Software/Manager.interface.yaml",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2025-04-11T02:34:44Z",
      "side": 1,
      "message": "This is a good point. The direction I am thinking is RF task messages will be updated by watching for Software.Collection interface (https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/74853) and the associated Software.Activation interfaces, till the object path returned by code-update-manager marks the update complete.\n\nWe can enhance the D-Bus interfaces so that Redfish messages associated with code update can be added to the RF task. https://github.com/openbmc/bmcweb/blob/177612aaa0633cf9d5aef0b763a43135cf552d9b/redfish-core/include/registries/update_message_registry.hpp\n(Update.1.0.TargetDetermined, Update.1.0.TransferComplete ..)\n\nLet me know your thoughts.",
      "parentUuid": "4497c292_fab16506",
      "revId": "e4ef4d635ebe94e3f77a2d323f21a2ba61b0ac45",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fd155183_9173fbbd",
        "filename": "yaml/xyz/openbmc_project/Software/Manager.interface.yaml",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2025-04-23T00:48:55Z",
      "side": 1,
      "message": "\u003e This is a good point. The direction I am thinking is RF task messages will be updated by watching for Software.Collection interface (https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/74853) and the associated Software.Activation interfaces, till the object path returned by code-update-manager marks the update complete.\n\u003e \n\nThat is not how the intended purpose of the collection interface is as there can be multiple collection interfaces and there is no way explicit way to figure out to which collection interface the update belongs to.\n\n\u003e We can enhance the D-Bus interfaces so that Redfish messages associated with code update can be added to the RF task. https://github.com/openbmc/bmcweb/blob/177612aaa0633cf9d5aef0b763a43135cf552d9b/redfish-core/include/registries/update_message_registry.hpp\n\u003e (Update.1.0.TargetDetermined, Update.1.0.TransferComplete ..)\n\u003e \n\u003e Let me know your thoughts.\n\nAdding the PDI events and errors for Update flow (based on Redfish messages) is in the plan but that is not related to my question. For that, the RF Task would be extended to watch for PDI errors and events matching the objectPath returned from Update interface and then converted to Redfish events and added to RF Task. So, lets leave that conversation to a side.\n\nWhat i am referring to here is the messages being added to Task messages based on the activation status and activation progress interfaces https://grok.openbmc.org/xref/openbmc/bmcweb/redfish-core/lib/update_service.hpp?r\u003d177612aaa0633cf9d5aef0b763a43135cf552d9b#149 . So, i can think of following options -\n\n1. Refer back to the design and lets first conclude if we even need this design enhancement as that conversation is still underway based on the design PR.\n2. Based on conclusion for #1, we can come back and brainstorm more on this interface.",
      "parentUuid": "3738013f_f1aed7bc",
      "revId": "e4ef4d635ebe94e3f77a2d323f21a2ba61b0ac45",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}