{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "bb04d1f3_d7f878b7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-07-21T16:40:03Z",
      "side": 1,
      "message": "This is written as if there is a design you are pointing to?  Is it just not up yet?",
      "revId": "8acda84894ab7fbea23a33dd630d4a420cb85ee2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a897af90_51513690",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2023-07-21T17:24:08Z",
      "side": 1,
      "message": "I have a set of patches for 3 repositories (phosphor-dbus-interfaces, phosphor-logging, bmcweb) to implement an rsyslog filter setup through Redfish.\n\nWhat do you mean by \"design\"? If this is a document describing how \"phosphor-rsyslog-conf\" interacts with the user and \"bmcweb\" via DBus, then I don\u0027t have it.\n\nI added a new feature to \"phosphor-rsyslog-conf\" (no changes related to the number of syslog servers supported, i.e. \"phosphor-rsyslog-conf\" still only supports one syslog server).\nAnd the changes in \"bmcweb\" are made in accordance with the Redfish specification.",
      "parentUuid": "bb04d1f3_d7f878b7",
      "revId": "8acda84894ab7fbea23a33dd630d4a420cb85ee2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fd71c1c2_124dc605",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-07-21T19:46:58Z",
      "side": 1,
      "message": "Please let me know when those are available.  I can\u0027t really provide feedback on an interface when I can\u0027t tell how it all fits together.  It is very surprising to me that we\u0027d want to expose things at this low of a level on dbus/Redfish, but this is where maybe a design would give some insight into the problems being solved.",
      "parentUuid": "a897af90_51513690",
      "revId": "8acda84894ab7fbea23a33dd630d4a420cb85ee2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e9e88ea_3f791d0a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2023-07-25T15:17:55Z",
      "side": 1,
      "message": "2nd patch for \"phosphor-logging\" repository: https://gerrit.openbmc.org/c/openbmc/phosphor-logging/+/65394/1?tab\u003dcomments\n\nPatrick, could you please take a look at these 2 patches? Without the third one for bmcweb (Redfish support).\n\nThe bmcweb patch needs to be reworked as I used boost coroutines to get several DBus properties in sequence and then process them to check if a syslog server is configured or not.\n\nEd Tanous disabled support for boost coroutines (\u0027-DSDBUSPLUS_DISABLE_BOOST_COROUTINES\u0027) for bmcweb in https://gerrit.openbmc.org/plugins/gitiles/openbmc/bmcweb/+/f706551d13f2e01b7e81fc7113c91efd253f315e",
      "parentUuid": "fd71c1c2_124dc605",
      "revId": "8acda84894ab7fbea23a33dd630d4a420cb85ee2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f72467f4_8d2a454b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-07-25T16:29:54Z",
      "side": 1,
      "message": "Coroutines have never been supported in bmcweb, so it\u0027s not clear why that patch would stop you or why coroutines were ever enabled for your use case.  Regardless, push your patch as it exists, and it might be able to answer questions faster than review comments.\n\n\u003e Patrick, could you please take a look at these 2 patches? Without the third one for bmcweb (Redfish support).\n\nGiven that Redfish has no rsyslog support, the bmcweb patch is going to be important to determine what these filters are actually used for, so we can make constructive suggestions.  Please get at least your existing coroutine based patch pushed and linked.",
      "parentUuid": "3e9e88ea_3f791d0a",
      "revId": "8acda84894ab7fbea23a33dd630d4a420cb85ee2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3ee52e3a_1fe020c6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-07-25T16:30:30Z",
      "side": 1,
      "message": "\u003e Patrick, could you please take a look at these 2 patches? Without the third one for bmcweb (Redfish support).\n\nNot really.  You\u0027ve presented exposing all of rsyslog config onto dbus, which I don\u0027t really have an appetite for nor do I understand why you\u0027ve gone this route.  This is what a design document is suppose to elaborate.\n\n- What are you solving?\n- How are you solving it?\n- What were the trade-offs that lead to this design?\n\nEven by giving me all of the code, without any design, you\u0027re asking me to reverse-engineer your requirements from your code.  ie. You\u0027re putting a burden on me (and others), the reviewers / maintainers, for something we likely don\u0027t have any care about.  The more work you put on us, the less likely you are to get your code in.\n\n\u003e The bmcweb patch needs to be reworked as I used boost coroutines to get several DBus properties in sequence and then process them to check if a syslog server is configured or not.\n\nHaving a non-functional patch would at least give me something to look at.  Right now all I see is you\u0027ve exposed the entire config on dbus and I have no idea why.  If I at least had the Redfish code here I could look up what schema you\u0027re trying to populate.\n\nYou do have a Redfish schema for this... right?  What is the schema?  I cannot believe DMTF would have exposed the entirety of rsyslog onto Redfish either.",
      "parentUuid": "3e9e88ea_3f791d0a",
      "revId": "8acda84894ab7fbea23a33dd630d4a420cb85ee2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4b92f9f_33367bbe",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2023-07-26T11:30:21Z",
      "side": 1,
      "message": "Okay, let me make this more clear:\n\n1) There is a need to filter syslog messages by facility and priority. First, through Redfish.\n2) At the moment there is no support for this functionality in openbmc.\n3) It is supported to set up a remote rsyslog server via DBus/REST (https://github.com/openbmc/phosphor-logging#remote-logging-via-rsyslog). Rsyslog will send messages to the remote server using the syslog protocol. The default filter \"\\*.\\*\" is applied.\n4) Filter settings and remote server address (IP, port, transport protocol) live in one file (/etc/rsyslog.d/server.conf).\n\nSo, openbmc has a service (phosphor-rsyslog-conf) for setting the address of a remote syslog server by editing the config file. I want to add the ability to configure syslog filters in the same config file with this service. And then interact with the attributes/methods of the service via Redfish.\n\nI use the Redfish \"EventDestination\" schema. Since v1.9 EventDestination adds a \"SyslogFilters\" property.\nhttps://www.dmtf.org/sites/default/files/standards/documents/DSP2046_2022.1.pdf\nhttps://www.dmtf.org/sites/default/files/Remote_and_Local_Syslog_05-2020-WIP.pdf\n\nbmcweb patch (doesn\u0027t compile. Just as an example of what I\u0027m doing):\nhttps://gerrit.openbmc.org/c/openbmc/bmcweb/+/65417",
      "parentUuid": "3ee52e3a_1fe020c6",
      "revId": "8acda84894ab7fbea23a33dd630d4a420cb85ee2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d0ac6ef_c8cf0af7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-07-25T16:29:54Z",
      "side": 1,
      "message": "Redfish has no rsyslog API, so it\u0027s not clear how this would even work.  The DMTF defined schemas are generic, in terms of EventDestination and Message filters, which don\u0027t seem like they would map here.",
      "range": {
        "startLine": 10,
        "startChar": 45,
        "endLine": 11,
        "endChar": 11
      },
      "revId": "8acda84894ab7fbea23a33dd630d4a420cb85ee2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06cadb0f_9a128c4f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1001853
      },
      "writtenOn": "2023-07-26T11:30:21Z",
      "side": 1,
      "message": "I use the Redfish \"EventDestination\" schema. Since v1.9 EventDestination adds a \"SyslogFilters\" property.\nPlease see comment above.",
      "parentUuid": "5d0ac6ef_c8cf0af7",
      "range": {
        "startLine": 10,
        "startChar": 45,
        "endLine": 11,
        "endChar": 11
      },
      "revId": "8acda84894ab7fbea23a33dd630d4a420cb85ee2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}