{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "be58fc8e_af6f1390",
        "filename": "yaml/xyz/openbmc_project/Inventory/Decorator/ManagedHost.interface.yaml",
        "patchSetId": 6
      },
      "lineNbr": 21,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-11-26T14:09:34Z",
      "side": 1,
      "message": "I\u0027ve generally taken the philosophy that we should use the generic Inventory.Item rather than using the specific ones.  I find that for these someone later on will add another and another and it is of low value to have the specifics here.\n\nIs there a strong reason why we want to be explicit of {Cpu, Dimm} in this case or can we put this on the generic association?",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 21,
        "endChar": 51
      },
      "revId": "9550834b1b17b91598819a36c9bf3befac999030",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41e831a1_c21113f4",
        "filename": "yaml/xyz/openbmc_project/Inventory/Decorator/ManagedHost.interface.yaml",
        "patchSetId": 6
      },
      "lineNbr": 21,
      "author": {
        "id": 1002222
      },
      "writtenOn": "2025-11-26T14:34:10Z",
      "side": 1,
      "message": "I have no opinion on that. @gunnar@gmills.xyz maybe?",
      "parentUuid": "be58fc8e_af6f1390",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 21,
        "endChar": 51
      },
      "revId": "9550834b1b17b91598819a36c9bf3befac999030",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c01eb480_97e267fd",
        "filename": "yaml/xyz/openbmc_project/Inventory/Decorator/ManagedHost.interface.yaml",
        "patchSetId": 6
      },
      "lineNbr": 21,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-11-28T11:05:53Z",
      "side": 1,
      "message": "\u003e Is there a strong reason why we want to be explicit of {Cpu, Dimm} in this case or can we put this on the generic association?\n\nNot sure if that counts as a strong reason, but\n\nIf we were to put\n```\nrequired_endpoint_interfaces:\n          - xyz.openbmc_project.Inventory.Item\n```\n\nwe are effectively saying that \n\n```\nxyz.openbmc_project.Inventory.Item.PCIeFunction\nxyz.openbmc_project.Inventory.Item.Chassis\nxyz.openbmc_project.Inventory.Item.CpuCore\nxyz.openbmc_project.Inventory.Item.NetworkInterface\n...\n```\n\ncan be `contained_by` a ManagedHost, right?\n\nOtherwise we are documenting an association which will not even be used or implemented.\n\n### Ambiguity in querying\n\nSomething like bmcweb needs to know which associations can and should be used to query things on DBus.\n\nWith how the associations are currently documented on `xyz.openbmc_project.Inventory.Item`\n\nhttps://github.com/openbmc/phosphor-dbus-interfaces/blob/900af2c70e9c045508f60c029583b6cc30eb596a/yaml/xyz/openbmc_project/Inventory/Item.interface.yaml\n\nit may not be entirely clear. How do we find the powersupplies for a chassis?\nDo we go with `contained_by` and look for `Inventory.Item.PowerSupply`?\n\nDo we go with `powered_by` instead?\n\nFor powersupplies this is solved since `Inventory.Item.Chassis` documents a `powered_by` association **specifically** to `Inventory.Item.PowerSupply`.\n\n### PDI should be source of truth for how to query associations\n\nIf we do not document these associations in a fine grained manner in PDI, bmcweb will effectively take over this role and the associations will have to be created in such a way that it aligns with how bmcweb is querying them.\n\nDo we want that?\n\n### In terms of the concrete example\n\nHow do we find `Inventory.Item.Dimm` when starting from a ManagedHost?\n\nIf we specify `containing` `Inventory.Item` then it may be unclear if that is directly leading us to `Inventory.Item.Dimm` or if there is another inventory item in-between that must be queried.\n\nMaybe the `oontaining` for `Inventory.Item` there is meant for `Inventory.Item.Cpu` and `Inventory.Item.Dimm` is queried in some other way?\n\nAll these questions may pop up.\n\nReactors and external interfaces may need the fine grained documentation there to know which associations to create where and how to query.",
      "parentUuid": "41e831a1_c21113f4",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 21,
        "endChar": 51
      },
      "revId": "9550834b1b17b91598819a36c9bf3befac999030",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "973ab6c9_f27e080a",
        "filename": "yaml/xyz/openbmc_project/Inventory/Decorator/ManagedHost.interface.yaml",
        "patchSetId": 6
      },
      "lineNbr": 21,
      "author": {
        "id": 1002065
      },
      "writtenOn": "2025-12-02T16:02:47Z",
      "side": 1,
      "message": "We also could go with `xyz.openbmc_project.Inventory.Item.System` rather than `xyz.openbmc_project.Inventory.Decorator.ManagedHost`. \n \n`Inventory.Item.System` is also used to identify objects as computer systems and not specific to multi-host. Ideally we use interfaces, that are configured on both single- and multi-host, considering that long term we should use associations for both platform types.\n\nIn that case we would need to make some smaller adjustments in EM and bmcweb for multi-host, like adding `Inventory.Item.System` to the multi-host configs, as well as including the interface in our dbus queries in bmcweb.",
      "parentUuid": "c01eb480_97e267fd",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 21,
        "endChar": 51
      },
      "revId": "9550834b1b17b91598819a36c9bf3befac999030",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff1b5c1a_f1b8d8f7",
        "filename": "yaml/xyz/openbmc_project/Inventory/Decorator/ManagedHost.interface.yaml",
        "patchSetId": 6
      },
      "lineNbr": 21,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-12-03T03:36:49Z",
      "side": 1,
      "message": "\u003e it may not be entirely clear. How do we find the powersupplies for a chassis? Do we go with contained_by and look for Inventory.Item.PowerSupply? Do we go with powered_by instead?  For powersupplies this is solved since Inventory.Item.Chassis documents a powered_by association specifically to Inventory.Item.PowerSupply.\n\n1. It entirely depends on what you\u0027re trying to deduce.  Are you looking for the power supply *in* a chassis or a power supply *powering* a chassis?  These are two different associations because they\u0027re two different inquiries.\n\n2. If you are suggesting we also change powered_by to be on Item, feel free to go for it.\n\n\u003e PDI should be source of truth for how to query associations.\n\u003e If we do not document these associations in a fine grained manner in PDI, bmcweb will effectively take over this role and the associations will have to be created in such a way that it aligns with how bmcweb is querying them.\n\nPDI being a source of truth does not imply a requirement on it documenting fine grained associations.\n\nPDI is being truthful: any Item may be \"contained in\" a Chassis.  Just because bmcweb, entity-manager, etc. do not **implement** a complete set does not mean it isn\u0027t a **reasonable** association; one which might be leveraged in the future without any further design discussion.\n\n\u003e How do we find Inventory.Item.Dimm when starting from a ManagedHost?\n\nThis same question has been posed when I wrote the association requirements that we would not accept associations like \"dimm_contained_in_chassis\".  Anytime you have two potential interfaces using the same association you may need to further deduce which ones are what.  There\u0027s fundamentally nothing in PDI that prevents you from formulating a \"GPU Card\" as an { Item, Asset, Board, CPU, and DIMM } all in one dbus path.\n\nIf you want these kinds of queries to be more efficient, I would suggest we improve the mapper query APIs.\n\n\u003e We also could go with xyz.openbmc_project.Inventory.Item.System rather than xyz.openbmc_project.Inventory.Decorator.ManagedHost.\n\nI\u0027m fine with this also.  Do we have `Item.System` implemented everywhere necessary though?  It doesn\u0027t appear that any Meta configs currently expose `Item.System`.",
      "parentUuid": "973ab6c9_f27e080a",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 21,
        "endChar": 51
      },
      "revId": "9550834b1b17b91598819a36c9bf3befac999030",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "67f5c679_8b75c12b",
        "filename": "yaml/xyz/openbmc_project/Inventory/Decorator/ManagedHost.interface.yaml",
        "patchSetId": 6
      },
      "lineNbr": 21,
      "author": {
        "id": 1002222
      },
      "writtenOn": "2025-12-04T07:00:49Z",
      "side": 1,
      "message": "I removed the specific Item type from ManagedHost interface in accordance to your first comment. No need to broaden the discussion about the use of `Item.System` in place of `ManagedHost`. \n\n@patrick@stwcx.xyz let me know if there is anything else. My roadmap is to resolve this so I can get the bmcweb changes host hw-inventory in until chistmas.",
      "parentUuid": "ff1b5c1a_f1b8d8f7",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 21,
        "endChar": 51
      },
      "revId": "9550834b1b17b91598819a36c9bf3befac999030",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}