description: >
    Interface for performing RDE operations on Redfish-capable devices. Supports
    inline or file-based payloads and provides schema and capability discovery
    services.

service_names:
    - default: xyz.openbmc_project.RDE.Manager

methods:
    - name: PerformRedfishOperation
      description: >
          Execute a Redfish operation on the target device using either an
          inline or file-based payload.
      parameters:
          - name: RequestId
            type: uint32
            description: >
                Unique identifier for the request.
          - name: OperationId
            type: enum[xyz.openbmc_project.RDE.Common.OperationType]
            description: >
                Type of Redfish operation to perform.
          - name: TargetURI
            type: string
            description: >
                URI of the target resource or action (e.g.,
                /Actions/CustomCommand).
          - name: DeviceId
            type: string
            description: >
                Unique device identifier.
          - name: Payload
            type: string
            description: >
                Inline JSON/BEJ payload string or a file path/URI. If
                PayloadFormat is FilePath, this must point to the file.
          - name: PayloadFormat
            type: enum[self.PayloadFormatType]
            default: Inline
            optional: true
            description: >
                Specifies whether Payload is embedded or provided as a file
                path.
          - name: EncodingType
            type: string
            default: "BEJ"
            optional: true
            description: >
                Payload encoding format. Options include BEJ or JSON.
          - name: SessionId
            type: string
            optional: true
            description: >
                Session identifier to correlate related transactions.
      returns:
          - name: Response
            type: string
            description: >
                JSON-formatted or encoded response depending on operation.
          - name: StatusCode
            type: uint16
            description: >
                HTTP-style numeric status code representing execution outcome.
      errors:
          - xyz.openbmc_project.Common.Error.InternalFailure
          - xyz.openbmc_project.Common.Error.InvalidArgument
          - xyz.openbmc_project.Common.Error.NotAllowed
          - xyz.openbmc_project.Common.Error.Unavailable

    - name: GetDeviceSchemaInfo
      description: >
          Retrieve the schema or URI dictionary for a target device.
      parameters:
          - name: DeviceId
            type: string
            description: >
                Unique identifier for the target device.
      returns:
          - name: SchemaInfo
            type: array[dict[string, string]]
            description: >
                A flat array of Redfish resource descriptors. Each dictionary
                must include key-value pairs that describe a Redfish resource
                and its supported command. Valid keys are defined in the
                SchemaDescriptorKeys enumeration.
      errors:
          - xyz.openbmc_project.Common.Error.Unavailable
          - xyz.openbmc_project.Common.Error.InternalFailure

    - name: GetSupportedOperations
      description: >
          Return the list of supported Redfish operations and encoding types for
          a target device.
      parameters:
          - name: DeviceId
            type: string
            description: >
                Unique device identifier.
      returns:
          - name: SupportedOps
            type: array[enum[xyz.openbmc_project.RDE.Common.OperationType]]
            description: >
                Redfish logical operations supported by the device, as
                determined through capability discovery. These align with
                operation-specific flags defined in the RDE specification.
      errors:
          - xyz.openbmc_project.Common.Error.InternalFailure

enumerations:
    - name: SchemaOutputFormat
      description: >
          Format of schema response content.
      values:
          - name: JsonData
            description: Return the schema as an inline JSON string.
          - name: FilePath
            description: Return a URI or file path to the schema.

    - name: PayloadFormatType
      description: >
          Format of the payload input.
      values:
          - name: Inline
            description: Payload is embedded inline as a string.
          - name: FilePath
            description: Payload is a path or URI to external data.

paths:
    - namespace: /xyz/openbmc_project/rde
      segments:
          - name: BMC
            value: bmc
          - name: System
            value: system
