{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "21a1bfb9_04f82e2d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-11-26T00:32:00Z",
      "side": 1,
      "message": "New features seem like the wrong place to start broaching the \"EM config should use\" PDI architectural thing.  For leak detection, lets just add it similar to how every other new feature as been handled (including intrusion detection, which is darn close to identical to this) and get it merged.  If we want to then AFTER or treat this patch as aspirational to go chase the PDI stuff down and sort out all the consistency issues, we can, but we shouldn\u0027t treat concrete interfaces as blocking for leak detection.\n\nThe reality is that today the EM codebase can\u0027t produce concrete types for a given interface, and can\u0027t produce typed enums.  Until it can, we should avoid checking in things like this.",
      "revId": "0d609b9a5a2cf9a7c9d4180e1a38139e12d080dc",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7bbd653_8e11a32d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-11-26T02:13:09Z",
      "side": 1,
      "message": "\u003e New features seem like the wrong place to start broaching the \"EM config should use\" PDI architectural thing\n\nI think this is the opposite (and this isn\u0027t the first one that has been proposed in the last few weeks).  This was to allow other daemons to consume EM configs in a type-safe way, not for EM to publish configs.\n\n\u003e The reality is that today the EM codebase can\u0027t produce concrete types for a given interface, and can\u0027t produce typed enums. Until it can, we should avoid checking in things like this.\n\nI fully expected this to be a concern here and hoped the EM maintainers would weigh in.  EM _can_ create typed enums like this, because a dbus enum is just a string, but it requires the strings to be fully qualified strings and EM typically makes \"short names\".",
      "parentUuid": "21a1bfb9_04f82e2d",
      "revId": "0d609b9a5a2cf9a7c9d4180e1a38139e12d080dc",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35872adf_69a51345",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-11-26T02:35:27Z",
      "side": 1,
      "message": "\u003e \u003e New features seem like the wrong place to start broaching the \"EM config should use\" PDI architectural thing\n\u003e \n\u003e I think this is the opposite (and this isn\u0027t the first one that has been proposed in the last few weeks).  This was to allow other daemons to consume EM configs in a type-safe way, not for EM to publish configs.\n\u003e \n\u003e \u003e The reality is that today the EM codebase can\u0027t produce concrete types for a given interface, and can\u0027t produce typed enums. Until it can, we should avoid checking in things like this.\n\u003e \n\u003e I fully expected this to be a concern here and hoped the EM maintainers would weigh in.  EM _can_ create typed enums like this, because a dbus enum is just a string, but it requires the strings to be fully qualified strings and EM typically makes \"short names\".\n\nEnums is one concern.  For that neither of my immediate ideas to fix this seem like a good idea.\n1. Break all existing configs, and require a type be assigned to every string entry representing an enum.  This requires config writers to be dbus experts, which we should avoid if we can.\n2. Add a static entry-\u003etype map of all possible types.  Considering even just getting a concrete accounting of the json configs has been difficult, this seems hard and would make forked-development more difficult, as every new type would require a code change.\n\nAny other options for enums I\u0027m not thinking of?\n\n\nThe other larger concern is integer/string types.  EM will happily publish a string, a float, and a uint64 from the same interface, property name.  It loads everything through a variant to coerce to the type the reactor is looking for.  I\u0027m not really sure how to handle that in a reactor if this file defines things as concrete types.  FWIW, in Jagpals leak detector daemon I see he found the same problem.\n\nYes... this design is insane.  If we have ideas on how to make it better absolutely, I\u0027m in (will probably help), but i haven\u0027t had an idea that didn\u0027t break the world or require a mapping of all possible types.",
      "parentUuid": "e7bbd653_8e11a32d",
      "revId": "0d609b9a5a2cf9a7c9d4180e1a38139e12d080dc",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f05420a_3e4b69cb",
        "filename": "yaml/xyz/openbmc_project/Configuration/GPIOLeakDetector.interface.yaml",
        "patchSetId": 4
      },
      "lineNbr": 19,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-11-26T00:32:00Z",
      "side": 1,
      "message": "EM is not currently capable of producing these style of enums with a namespace.  Not really sure what to do here, but if we\u0027re really going to start modeling the EM configuration namespace here, we shouldn\u0027t start with a new feature, we should start with something that exists.",
      "revId": "0d609b9a5a2cf9a7c9d4180e1a38139e12d080dc",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd59482d_450c2032",
        "filename": "yaml/xyz/openbmc_project/Configuration/GPIOLeakDetector.interface.yaml",
        "patchSetId": 4
      },
      "lineNbr": 32,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-11-26T00:32:00Z",
      "side": 1,
      "message": "same here.",
      "revId": "0d609b9a5a2cf9a7c9d4180e1a38139e12d080dc",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "386472f6_b2d92b45",
        "filename": "yaml/xyz/openbmc_project/Configuration/GPIOLeakDetector.interface.yaml",
        "patchSetId": 4
      },
      "lineNbr": 40,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-11-26T00:32:00Z",
      "side": 1,
      "message": "This could use some more description.",
      "range": {
        "startLine": 40,
        "startChar": 0,
        "endLine": 40,
        "endChar": 50
      },
      "revId": "0d609b9a5a2cf9a7c9d4180e1a38139e12d080dc",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}